{"name": "1586_I. Omkar and Mosaic", "description": "Omkar is creating a mosaic using colored square tiles, which he places in an n \u00d7 n grid. When the mosaic is complete, each cell in the grid will have either a glaucous or sinoper tile. However, currently he has only placed tiles in some cells. \n\nA completed mosaic will be a mastapeece if and only if each tile is adjacent to exactly 2 tiles of the same color (2 tiles are adjacent if they share a side.) Omkar wants to fill the rest of the tiles so that the mosaic becomes a mastapeece. Now he is wondering, is the way to do this unique, and if it is, what is it?\n\nInput\n\nThe first line contains a single integer n (1 \u2264 n \u2264 2000).\n\nThen follow n lines with n characters in each line. The i-th character in the j-th line corresponds to the cell in row i and column j of the grid, and will be S if Omkar has placed a sinoper tile in this cell, G if Omkar has placed a glaucous tile, . if it's empty. \n\nOutput\n\nOn the first line, print UNIQUE if there is a unique way to get a mastapeece, NONE if Omkar cannot create any, and MULTIPLE if there is more than one way to do so. All letters must be uppercase.\n\nIf you print UNIQUE, then print n additional lines with n characters in each line, such that the i-th character in the j^{th} line is S if the tile in row i and column j of the mastapeece is sinoper, and G if it is glaucous. \n\nExamples\n\nInput\n\n\n4\nS...\n..G.\n....\n...S\n\n\nOutput\n\n\nMULTIPLE\n\n\nInput\n\n\n6\nS.....\n....G.\n..S...\n.....S\n....G.\nG.....\n\n\nOutput\n\n\nNONE\n\n\nInput\n\n\n10\n.S....S...\n..........\n...SSS....\n..........\n..........\n...GS.....\n....G...G.\n..........\n......G...\n..........\n\n\nOutput\n\n\nUNIQUE\nSSSSSSSSSS\nSGGGGGGGGS\nSGSSSSSSGS\nSGSGGGGSGS\nSGSGSSGSGS\nSGSGSSGSGS\nSGSGGGGSGS\nSGSSSSSSGS\nSGGGGGGGGS\nSSSSSSSSSS\n\n\nInput\n\n\n1\n.\n\n\nOutput\n\n\nNONE\n\nNote\n\nFor the first test case, Omkar can make the mastapeeces\n\nSSSS\n\nSGGS\n\nSGGS\n\nSSSS\n\nand \n\nSSGG\n\nSSGG\n\nGGSS\n\nGGSS.\n\nFor the second test case, it can be proven that it is impossible for Omkar to add tiles to create a mastapeece.\n\nFor the third case, it can be proven that the given mastapeece is the only mastapeece Omkar can create by adding tiles.\n\nFor the fourth test case, it's clearly impossible for the only tile in any mosaic Omkar creates to be adjacent to two tiles of the same color, as it will be adjacent to 0 tiles total. ", "tags": ["combinatorics", "constructive algorithms", "math"], "difficulty": 15, "id": 1586, "sample_io": [{"input": "10\n.S....S...\n..........\n...SSS....\n..........\n..........\n...GS.....\n....G...G.\n..........\n......G...\n..........\n", "output": ["UNIQUE\nSSSSSSSSSS\nSGGGGGGGGS\nSGSSSSSSGS\nSGSGGGGSGS\nSGSGSSGSGS\nSGSGSSGSGS\nSGSGGGGSGS\nSGSSSSSSGS\nSGGGGGGGGS\nSSSSSSSSSS\n"]}, {"input": "4\nS...\n..G.\n....\n...S\n", "output": ["MULTIPLE\n"]}, {"input": "6\nS.....\n....G.\n..S...\n.....S\n....G.\nG.....\n", "output": ["NONE\n"]}, {"input": "1\n.\n", "output": ["NONE\n"]}], "test_list": [{"input": "8\n........\n........\n........\n........\n........\n........\n........\n........\n", "output": ["MULTIPLE\n"]}, {"input": "20\n..............S.....\n....................\n.............S.....S\n....................\n....................\n...S................\n....................\n....................\n....................\n....................\n....................\n....................\n....................\n...................S\n.G..................\n....................\n....................\n...................S\n................G...\nS..................G\n", "output": ["UNIQUE\nGGSSSSSSGGSSSSSSSSSS\nGGSGGGGSGGSGGGGGGGGS\nSSSGSSGSSSSGSSSSSSGS\nSGGGSSGGGGGGSGGGGSGS\nSGSSGGSSSSSSSGSSGSGS\nSGSSGGSGGGGGGGSSGSGS\nSGGGSSSGSSSSSSGGGSGS\nSSSGSGGGSGGGGSGSSSGS\nGGSGSGSSSGSSGSGSGGGS\nGGSGSGSGGGSSGSGSGSSS\nSSSGSGSGSSGGGSGSGSGG\nSGGGSGSGSSGSSSGSGSGG\nSGSSSGSGGGGSGGGSGSSS\nSGSGGGSSSSSSGSSSGGGS\nSGSGSSGGGGGGGSGGSSGS\nSGSGSSGSSSSSSSGGSSGS\nSGSGGGGSGGGGGGSSGGGS\nSGSSSSSSGSSSSGSSGSSS\nSGGGGGGGGSGGSGGGGSGG\nSSSSSSSSSSGGSSSSSSGG\n"]}, {"input": "6\n.S....\n......\n......\nS..S..\n......\n......\n", "output": ["UNIQUE\nSSSSSS\nSGGGGS\nSGSSGS\nSGSSGS\nSGGGGS\nSSSSSS\n"]}, {"input": "9\n...S.G...\nG........\n.........\n.........\n....G....\n.........\n.........\nS........\n.........\n", "output": ["NONE\n"]}, {"input": "8\n.S......\n.......S\n........\nG.......\n........\n........\n........\n...G....\n", "output": ["UNIQUE\nSSGGGGSS\nSSGSSGSS\nGGGSSGGG\nGSSGGSSG\nGSSGGSSG\nGGGSSGGG\nSSGSSGSS\nSSGGGGSS\n"]}, {"input": "4\n....\n.G..\n...S\nG...\n", "output": ["NONE\n"]}, {"input": "5\n.....\n...GS\n.S...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "2\n..\n..\n", "output": ["MULTIPLE\n"]}, {"input": "10\n....SS.G.S\nS..G.S.GSS\n.GSSG.S.G.\n.GSSGG..GG\n..G..S...S\nSS.GSSGG.S\nGG..GGS.G.\nGG.....S..\nSSG.S.GG.S\n.SGGSS..SS\n", "output": ["MULTIPLE\n"]}, {"input": "1\nG\n", "output": ["NONE\n"]}, {"input": "10\nS....S..SS\n..G....G.S\n.GSS..SSG.\n.GS.GG.SG.\nS..G.SG..S\n...GSS....\n.GS..G.SG.\n.GS...S.G.\nS..G..G..S\nSS......SS\n", "output": ["MULTIPLE\n"]}, {"input": "10\n..........\n..........\n..........\n.G........\n..........\n..........\nG.........\n........S.\nG..G......\n..........\n", "output": ["MULTIPLE\n"]}, {"input": "5\n.GSGS\nSGSG.\nSSSGS\nGGGG.\nS.SGS\n", "output": ["NONE\n"]}, {"input": "1\nS\n", "output": ["NONE\n"]}, {"input": "8\n......S.\n.....G.S\n....S.G.\n...G.S..\n..S.G...\n.G.S....\nS.G.....\nSS......\n", "output": ["MULTIPLE\n"]}, {"input": "15\n..............G\n............G..\n...........S...\n...............\n...............\n...............\n............G..\n...............\n...............\n.............S.\n.........G.....\n...............\n...............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "20\n..GG.SGG..G.GGGGSSS.\n.S.GS.G..SGSSSSGS.GS\nG....GSSGGG.GG.GSGGS\nGG.S.GSSGSS.G.SG.SSS\n.SG.S.GGG.GGSSSG.GGG\nSS.G...SSSGGSGGSSSS.\nGGSSG.G.G.SSS.GSG..G\nG.S.GS...GS..SSS..SG\nS..GG...S.S...GGSSSG\n..GSSSGG.G.S.SG.S.GG\nGGG.GG.SS.G.GGSSS.S.\nGS.SGG.GGS.S.GSGGGSS\n..G.SSSG.SG.S.SGSSG.\nG.G.SGGSS.G.....SSGG\nG..SSGGS.GS...S.GG..\nGGGGGSSSGGSGG..S.GS.\nS.SSGS.G.SS..SG.S.GG\nSGGSGSGGSGGGSS.G.S.G\nSGGSGSSS.GS....SG...\n.SSSG.G..G..G..SG...\n", "output": ["MULTIPLE\n"]}, {"input": "4\nS.G.\n..S.\n....\nG...\n", "output": ["NONE\n"]}, {"input": "6\nG.GSS.\nGSSGGS\n.SGGGG\nGGGS.G\nGSG.SG\nSG.GGG\n", "output": ["NONE\n"]}, {"input": "5\n...SG\n.....\n.S...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "8\n.SSGG.GG\n.GGGG.GS\nSGG.GSG.\nSSSS.GGG\nGG.G.SSG\nGSGSSGGS\nG...SGSS\n...GSGGS\n", "output": ["NONE\n"]}, {"input": "4\nG..S\n....\n....\n....\n", "output": ["UNIQUE\nGGSS\nGGSS\nSSGG\nSSGG\n"]}, {"input": "4\n....\n.G..\n...G\nS...\n", "output": ["UNIQUE\nGGSS\nGGSS\nSSGG\nSSGG\n"]}, {"input": "11\n...........\n...........\n...........\n....G.....S\n....S......\n....G......\n...........\nS..........\n........G..\n.........S.\n.........G.\n", "output": ["NONE\n"]}, {"input": "16\nG.G..........S..\n...S............\n................\n................\n......G.........\n.G..............\n................\n.....S..........\n................\n..........S.....\n.....S..........\n...........S....\n....G..........G\n......S.........\n.....S..........\nS...G...........\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G........\n...............\n...............\n...............\n.S.............\n.....S.........\n.G.............\n.........G.....\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "6\n.S....\n......\n......\n..S..S\n......\n......\n", "output": ["MULTIPLE\n"]}, {"input": "9\n./.S.G...\nG........\n.........\n.........\n....G....\n.........\n.........\nS........\n.........\n", "output": ["NONE\n"]}, {"input": "8\n.S......\nS.......\n........\nG.......\n........\n........\n........\n...G....\n", "output": ["MULTIPLE\n"]}, {"input": "5\n.....\n...GR\n.S...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "10\n....SS.G.S\nS..G.S.GSS\n.GSSG.S.G.\n.GSGGG..SG\n..G..S...S\nSS.GSSGG.S\nGG..GGS.G.\nGG.....S..\nSSG.S.GG.S\n.SGGSS..SS\n", "output": ["NONE\n"]}, {"input": "1\nH\n", "output": ["NONE\n"]}, {"input": "5\n.GSGS\nSFSG.\nSSSGS\nGGGG.\nS.SGS\n", "output": ["NONE\n"]}, {"input": "1\nT\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n...........S...\n...............\n...............\n...............\n............G..\n...............\n......./.......\n.............S.\n.........G.....\n...............\n...............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "20\n..GG.SGG..G.GGGGSSS.\n.S.GS.G..SGSSSSGS.GS\nG....GSSGGG.GG.GSGGS\nGG.S.GSSGSS.G.SG.SSS\n.SG.S.GGG.GGSSSG.GGG\nSS.G...SSSGGSGGSSSS.\nGGSSG.G.G.SSS.GSG..G\nG.S.GS...GS..SSS..SG\nS..GG...S.S...GGSSSG\nGG.S.GS.S.G.GGSSSG..\nGGG.GG.SS.G.GGSSS.S.\nGS.SGG.GGS.S.GSGGGSS\n..G.SSSG.SG.S.SGSSG.\nG.G.SGGSS.G.....SSGG\nG..SSGGS.GS...S.GG..\nGGGGGSSSGGSGG..S.GS.\nS.SSGS.G.SS..SG.S.GG\nSGGSGSGGSGGGSS.G.S.G\nSGGSGSSS.GS....SG...\n.SSSG.G..G..G..SG...\n", "output": ["NONE\n"]}, {"input": "6\nG.GSS.\nSGGSSG\n.SGGGG\nGGGS.G\nGSG.SG\nSG.GGG\n", "output": ["NONE\n"]}, {"input": "5\nGS...\n.....\n.S...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "8\n.SSGG.GG\n.GGGG.GS\nSGG.GSG.\nGGG.SSSS\nGG.G.SSG\nGSGSSGGS\nG...SGSS\n...GSGGS\n", "output": ["NONE\n"]}, {"input": "11\n...........\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS..........\n........G..\n.........S.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n.S.............\n.....S.........\n.G.............\n.........G.....\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "6\nS.....\n....G.\n..S...\nS.....\n....G.\nG.....\n", "output": ["NONE\n"]}, {"input": "1\n-\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n.........\n.........\n/...G....\n.........\n.........\nS........\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\n...GR\n.T...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "1\nI\n", "output": ["NONE\n"]}, {"input": "5\n.GSGS\nSFSG.\nSSSGS\nGGGG.\nS/SGS\n", "output": ["NONE\n"]}, {"input": "1\nU\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n...........S...\n...............\n...............\n...............\n............G..\n...............\n......./.......\n.............S.\n.........G.....\n......../......\n...............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "20\n..GG.GGG..G.GGGSSSS.\n.S.GS.G..SGSSSSGS.GS\nG....GSSGGG.GG.GSGGS\nGG.S.GSSGSS.G.SG.SSS\n.SG.S.GGG.GGSSSG.GGG\nSS.G...SSSGGSGGSSSS.\nGGSSG.G.G.SSS.GSG..G\nG.S.GS...GS..SSS..SG\nS..GG...S.S...GGSSSG\nGG.S.GS.S.G.GGSSSG..\nGGG.GG.SS.G.GGSSS.S.\nGS.SGG.GGS.S.GSGGGSS\n..G.SSSG.SG.S.SGSSG.\nG.G.SGGSS.G.....SSGG\nG..SSGGS.GS...S.GG..\nGGGGGSSSGGSGG..S.GS.\nS.SSGS.G.SS..SG.S.GG\nSGGSGSGGSGGGSS.G.S.G\nSGGSGSSS.GS....SG...\n.SSSG.G..G..G..SG...\n", "output": ["NONE\n"]}, {"input": "6\nG.GSS.\nSGGSSG\n.SGGGG\nGGGS.G\nGSG.SG\nGGG.GS\n", "output": ["NONE\n"]}, {"input": "5\nGS...\n.....\n.S...\n.../.\n.....\n", "output": ["NONE\n"]}, {"input": "8\n.SSGG.GG\n.GGGG.GS\nSGG.GSG.\nGGG.SSSS\nGG.G.SSG\nGSGSSGGS\nG...SGSS\nSGGSG...\n", "output": ["NONE\n"]}, {"input": "11\n...........\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS..........\n........G..\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n.............S.\n.....S.........\n.G.............\n.........G.....\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "6\n.....S\n....G.\n..S...\nS.....\n....G.\nG.....\n", "output": ["NONE\n"]}, {"input": "1\n/\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n.........\n.........\n/...G....\n.........\n.........\nS..../...\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\n.-.GR\n.T...\n.....\n.....\n", "output": ["NONE\n"]}, {"input": "1\nF\n", "output": ["NONE\n"]}, {"input": "5\n.GSGS\nSFSG.\nSSSGS\nGGGG.\nR/SGS\n", "output": ["NONE\n"]}, {"input": "1\nV\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n...........S...\n...............\n...............\n...............\n............G..\n...............\n......./.......\n.............S.\n.........G.....\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS...\n.....\n.S...\n.../.\n../..\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS..........\n........G..\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n.............S.\n.....S........-\n.G.............\n.........G.....\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n0\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n.........\n.........\n/...G....\n.........\n/........\nS..../...\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\n.-.GR\n.T...\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nE\n", "output": ["NONE\n"]}, {"input": "5\n.GSGS\nSFSG.\nSGSSS\nGGGG.\nR/SGS\n", "output": ["NONE\n"]}, {"input": "1\nW\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n...............\n......./.......\n.............S.\n.........G.....\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS.-.\n.....\n.S...\n.../.\n../..\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS..........\n......G....\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n.............S.\n.....S........-\n.G.............\n.........G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-1\n", "output": ["NONE\n"]}, {"input": "9\n...G.S./.\nG........\n.........\n.........\n/...G....\n.........\n/........\nS..../...\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\nRG.-.\n.T...\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nD\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSG.\nSGSSS\nGGGG.\nR/SGS\n", "output": ["NONE\n"]}, {"input": "1\nX\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n...............\n......./.......\n.............S.\n.....G.........\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n.....\n.S...\n.../.\n../..\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS......-...\n......G....\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n..../........S.\n.....S........-\n.G.............\n.........G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-2\n", "output": ["NONE\n"]}, {"input": "9\n...G.S./.\nG........\n...../...\n.........\n/...G....\n.........\n/........\nS..../...\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\nRG.-.\n...T.\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nC\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSG.\nSGSSS\nGGGG.\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\nY\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n............/..\n......./.......\n.............S.\n.....G.........\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n/....\n.S...\n.../.\n../..\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n...........\nS.....G....\n....S......\n....G......\n...........\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n...............\n...............\n..../........S.\n.....S........-\n.G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-4\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n...../...\n.........\n/...G....\n.........\n/........\nS..../...\n.........\n", "output": ["NONE\n"]}, {"input": "5\n.....\n.-.GR\n...T.\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nB\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSG.\nSGSSS\nHGGG.\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\nZ\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n............/..\n......./.......\n.............S.\n.....G.........\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n/....\n.S...\n.../.\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n.......-...\nS.....G....\n....S......\n....G......\n...........\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n.......S.......\n...............\n.G.G..G...-....\n...............\n............-..\n...............\n..../........S.\n.....S........-\n.G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n1\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n...../...\n.........\n/...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n.....\n.-.GS\n...T.\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nJ\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSH.\nSGSSS\nHGGG.\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n[\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n............/..\n......./.......\n...-.........S.\n.....G.........\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n./...\n.S...\n.../.\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-.......\n...........\n.......-...\nS.....G....\n....S......\n....G......\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n...............\n.G.G..G...-....\n...............\n............-..\n...............\n..../........S.\n.....S........-\n.G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n2\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\n........G\n...../...\n.........\n/...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n..-..\n.-.GS\n...T.\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nK\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSH.\nSGSSS\nHFGG.\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n\\\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n..-........./..\n......./.......\n...-.........S.\n.....G.........\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n./...\n.S...\n./...\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S......\n....G......\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n...............\n............-..\n...............\n..../........S.\n.....S........-\n.G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n4\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\n........G\n../../...\n.........\n/...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n..-..\n.-.GS\n..-T.\n..-..\n.....\n", "output": ["NONE\n"]}, {"input": "1\nL\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSH.\nSSSGS\nHFGG.\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n]\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n.....G.........\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/-.\n./...\n...S.\n./...\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S......\n......G....\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n...............\n...-........-..\n...............\n..../........S.\n.....S........-\n.G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n8\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n../../...\n.........\n/...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n..-..\n.-.GS\n..-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\nM\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSH.\nSSSGS\n.GGFH\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n^\n", "output": ["NONE\n"]}, {"input": "15\n..............G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n.........G.....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/..\n./...\n...S.\n./...\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S...-..\n......G....\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n...............\n...-........-..\n...............\n..../........S.\n.....S........-\n.G../..........\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n16\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n../../...\n.........\n0...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.GS\n..-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\nN\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nSFSH.\nSSSGS\n.GFGH\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n_\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n....../....S...\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n.........G.....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/.-\n./...\n...S.\n./...\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n...-.......\nS.....G....\n....S...-..\n......G....\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n...............\n...-........-..\n...............\n..../........S.\n.....S........-\n/G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n6\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n../../...\n........-\n0...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.GS\n./-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\nA\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nHFSS.\nSSSGS\n.GFGH\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\n`\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n...........S/..\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n.........G.....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/.-\n./...\n...S.\n.../.\n.....\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n...-.......\nS.....G....\n....S...-..\n/.....G....\n........./.\nS......-...\n.........G.\n.........T.\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n...-........-..\n...............\n..../........S.\n.....S........-\n/G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n7\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG........\n../../...\n..../...-\n0...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.GT\n..-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n@\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nHFSS.\nSSRGS\n.GFGH\nSGS/R\n", "output": ["NONE\n"]}, {"input": "1\na\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n...........S/..\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n..........G....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/.-\n./...\n...S.\n.../.\n..-..\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n...-.......\nS.....G....\n....S...-..\n/.....G....\n........./.\nS......-...\n.........G.\n.T.........\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n...-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S..........S..\n.........G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n11\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG.-......\n../../...\n..../...-\n0...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.GT\n/.-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n?\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nHFSS.\nSSRGS\n.GFGH\nSHS/R\n", "output": ["NONE\n"]}, {"input": "1\nb\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n./.........S/..\n...............\n...............\n...............\n............G..\n..-./......./..\n......./.......\n...-.........S.\n..........G....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/.-\n./...\n...S.\n..../\n..-..\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n...-.......\nS.....G....\n....S...-..\n/.....G..-.\n........./.\nS......-...\n.........G.\n.T.........\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n...-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S..........S..\n../......G.....\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-3\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG/-......\n../../...\n..../...-\n0...G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.GT\n/.-T.\n..,..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n>\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nHESS.\nSSRGS\n.GFGH\nSHS/R\n", "output": ["NONE\n"]}, {"input": "1\nc\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n./.........S/..\n...............\n...............\n...-...........\n............G..\n..-./......./..\n......./.......\n...-.........S.\n..........G....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\nGS/.-\n./...\n...S.\n..../\n..-/.\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S...-..\n/.....G..-.\n........./.\nS......-...\n.........G.\n.T.........\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n...-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S..........S..\n.....G....../..\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-6\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG/-......\n../../...\n..../...-\n0-..G....\n.........\n/........\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.FT\n/.-T.\n..,..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n=\n", "output": ["NONE\n"]}, {"input": "5\nSGSG.\nHESS.\nSSRGS\n.GFGH\n/HSSR\n", "output": ["NONE\n"]}, {"input": "1\nd\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n./.........S/..\n...............\n...............\n...-...........\n............G..\n./-./......./..\n......./.......\n...-.........S.\n..........G....\n....../........\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\n-./SG\n./...\n...S.\n..../\n..-/.\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S...-.-\n/.....G..-.\n........./.\nS......-...\n.........G.\n.T.........\n.........G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n-..-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S..........S..\n.....G....../..\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-5\n", "output": ["NONE\n"]}, {"input": "9\n./.S.G...\nG/-......\n../../...\n..../...-\n0-..G....\n.........\n....../..\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.FT\n/.-T.\n..-..\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n<\n", "output": ["NONE\n"]}, {"input": "5\n.GSGS\nHESS.\nSSRGS\n.GFGH\n/HSSR\n", "output": ["NONE\n"]}, {"input": "1\ne\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n./.........S/..\n...............\n...............\n...-...........\n............G..\n./-./......./..\n......./.......\n...-.........S.\n..........G....\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\n-./SG\n./...\n...S.\n..../\n..-0.\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S...-.-\n/.....G..-.\n........./.\nS......-...\n.........G.\n.T.........\n./.......G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n-..-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S./........S..\n.....G....../..\n............G..\n", "output": ["NONE\n"]}, {"input": "1\n-8\n", "output": ["NONE\n"]}, {"input": "9\n...G.S./.\nG/-......\n../../...\n..../...-\n0-..G....\n.........\n....../..\nS..../...\n....-....\n", "output": ["NONE\n"]}, {"input": "5\n...-.\n.-.FT\n/.-T.\n..-.-\n..-..\n", "output": ["NONE\n"]}, {"input": "1\n;\n", "output": ["NONE\n"]}, {"input": "5\n.GSGT\nHESS.\nSSRGS\n.GFGH\n/HSSR\n", "output": ["NONE\n"]}, {"input": "1\nf\n", "output": ["NONE\n"]}, {"input": "15\n........-.....G\n............G..\n../S........./.\n...............\n...............\n...-...........\n............G..\n./-./......./..\n......./.......\n...-.........S.\n..........G....\n......../......\n.-.............\n...G...S.......\n...............\n", "output": ["NONE\n"]}, {"input": "5\n-./SG\n./...\n...S.\n..../\n./-0.\n", "output": ["NONE\n"]}, {"input": "11\n...-....-..\n...........\n.......-...\nS.....G....\n....S...-.-\n/.....G..-.\n./.........\nS......-...\n.........G.\n.T.........\n./.......G.\n", "output": ["NONE\n"]}, {"input": "15\nG...........G..\n..............S\n./.....S.......\n......./.......\n.G.G..G...-....\n........./.....\n-..-........-..\n...............\n..../........S.\n.....S.../....-\n/G.............\n../......G.../.\n.S./........S..\n../......G.....\n............G..\n", "output": ["NONE\n"]}], "source_codes": ["\nimport sys\nimport threading\n\ndef main():\n    import sys\n    sys.setrecursionlimit(1 << 25)\n    n = int(sys.stdin.readline())\n    grid = [list(sys.stdin.readline().strip()) for _ in range(n)]\n\n    from collections import deque\n\n    # Directions: up, right, down, left\n    dir = [(-1, 0), (0, 1), (1, 0), (0, -1)]\n\n    # Check if a cell is valid\n    def is_valid(i, j):\n        return 0 <= i < n and 0 <= j < n\n\n    # BFS to propagate the color\n    def bfs(start_i, start_j, color):\n        queue = deque()\n        queue.append((start_i, start_j))\n        visited = [[False] * n for _ in range(n)]\n        visited[start_i][start_j] = True\n        while queue:\n            i, j = queue.popleft()\n            for di, dj in dir:\n                ni, nj = i + di, j + dj\n                if is_valid(ni, nj) and not visited[ni][nj]:\n                    if grid[ni][nj] == '.':\n                        grid[ni][nj] = color\n                        visited[ni][nj] = True\n                        queue.append((ni, nj))\n                    elif grid[ni][nj] != color:\n                        return False\n        return True\n\n    # Check if the current grid is valid\n    def is_valid_grid():\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] == '.':\n                    continue\n                count_same = 0\n                for di, dj in dir:\n                    ni, nj = i + di, j + dj\n                    if is_valid(ni, nj) and grid[ni][nj] == grid[i][j]:\n                        count_same += 1\n                if count_same != 2:\n                    return False\n        return True\n\n    # Try to fill the grid\n    def fill_grid():\n        # First, check for any existing tiles\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    # Try to BFS from this tile\n                    # We'll try to propagate the color\n                    # If any conflict is found, it's invalid\n                    # But since we don't know the color, we can't do this\n                    # So we need to find all connected components and assign colors\n                    pass\n\n        # To find connected components\n        visited = [[False] * n for _ in range(n)]\n        components = []\n\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.' and not visited[i][j]:\n                    # Start BFS\n                    q = deque()\n                    q.append((i, j))\n                    visited[i][j] = True\n                    comp = []\n                    while q:\n                        x, y = q.popleft()\n                        comp.append((x, y))\n                        for dx, dy in dir:\n                            nx, ny = x + dx, y + dy\n                            if is_valid(nx, ny) and not visited[nx][ny] and grid[nx][ny] == grid[i][j]:\n                                visited[nx][ny] = True\n                                q.append((nx, ny))\n                    components.append(comp)\n\n        # Now, for each component, we need to assign a color\n        # But the color must be such that every tile in the component has exactly 2 neighbors of the same color\n        # This is only possible if the component forms a cycle\n        # So we can try to assign the color and check\n\n        # For each component, check if it can be a cycle\n        # If not, it's invalid\n        # Also, if there are multiple components with same color, they must be separate\n        # But since we don't know the color, we can't assign directly\n\n        # Instead, we can try to assign colors based on BFS and check consistency\n        # If any conflict, return None\n\n        # Try to assign color to all components\n        # Start with first component\n        # Try to assign color 'S' and see if it's possible\n        # Then try 'G' and see if it's possible\n        # If both are possible, then it's multiple\n\n        # But this is computationally expensive\n\n        # Instead, we can try to fill the grid with a BFS from a single tile\n        # And see if it's possible\n\n        # Try to find a tile that is not '.'\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    color = grid[i][j]\n                    # Try to propagate this color\n                    # If any conflict, then it's invalid\n                    # Else, check if all tiles have exactly 2 same neighbors\n                    # But this is not enough, because other tiles may be placed\n                    # So we need to fill the grid and check\n\n        # Try to fill the grid\n        # Start with any tile that is not '.'\n        # If there are multiple such tiles, and they have different colors, it's invalid\n        # So first, check if all non '.' tiles have the same color\n        # If not, it's invalid\n        first_color = None\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    if first_color is None:\n                        first_color = grid[i][j]\n                    elif grid[i][j] != first_color:\n                        print(\"NONE\")\n                        return\n\n        # Now, if there are any non '.' tiles, they must all be same color\n        # So we can try to fill the rest with that color\n        # But we need to check if the resulting grid is valid\n        # So we can try to fill all '.' with the same color\n        # Then check if each tile has exactly 2 neighbors of same color\n\n        # Try to fill\n        temp_grid = [row[:] for row in grid]\n        for i in range(n):\n            for j in range(n):\n                if temp_grid[i][j] == '.':\n                    temp_grid[i][j] = first_color\n\n        # Check if this grid is valid\n        def is_valid_grid_after_fill(g):\n            for i in range(n):\n                for j in range(n):\n                    cnt = 0\n                    for dx, dy in dir:\n                        ni, nj = i + dx, j + dy\n                        if is_valid(ni, nj) and g[ni][nj] == g[i][j]:\n                            cnt += 1\n                    if cnt != 2:\n                        return False\n            return True\n\n        if is_valid_grid_after_fill(temp_grid):\n            # Check if there are any '.' tiles\n            if any('.' in row for row in grid):\n                # Try to fill with other color\n                temp_grid2 = [row[:] for row in grid]\n                for i in range(n):\n                    for j in range(n):\n                        if temp_grid2[i][j] == '.':\n                            temp_grid2[i][j] = 'S' if first_color == 'G' else 'G'\n                if is_valid_grid_after_fill(temp_grid2):\n                    print(\"MULTIPLE\")\n                    return\n            print(\"UNIQUE\")\n            for row in temp_grid:\n                print(''.join(row))\n            return\n\n        # Try to fill with other color\n        temp_grid = [row[:] for row in grid]\n        for i in range(n):\n            for j in range(n):\n                if temp_grid[i][j] == '.':\n                    temp_grid[i][j] = 'S' if first_color == 'G' else 'G'\n\n        if is_valid_grid_after_fill(temp_grid):\n            print(\"UNIQUE\")\n            for row in temp_grid:\n                print(''.join(row))\n            return\n\n        # If no valid fill, then it's impossible\n        print(\"NONE\")\n\n    # Check if there are any non '.' tiles\n    has_non_dot = any('.' not in row for row in grid)\n\n    if not has_non_dot:\n        if n == 1:\n            print(\"NONE\")\n        else:\n            print(\"NONE\")\n        return\n\n    fill_grid()\n\nthreading.Thread(target=main).start()\n\n\n"], "responses": ["```python\nimport sys\nimport threading\n\ndef main():\n    import sys\n    sys.setrecursionlimit(1 << 25)\n    n = int(sys.stdin.readline())\n    grid = [list(sys.stdin.readline().strip()) for _ in range(n)]\n\n    from collections import deque\n\n    # Directions: up, right, down, left\n    dir = [(-1, 0), (0, 1), (1, 0), (0, -1)]\n\n    # Check if a cell is valid\n    def is_valid(i, j):\n        return 0 <= i < n and 0 <= j < n\n\n    # BFS to propagate the color\n    def bfs(start_i, start_j, color):\n        queue = deque()\n        queue.append((start_i, start_j))\n        visited = [[False] * n for _ in range(n)]\n        visited[start_i][start_j] = True\n        while queue:\n            i, j = queue.popleft()\n            for di, dj in dir:\n                ni, nj = i + di, j + dj\n                if is_valid(ni, nj) and not visited[ni][nj]:\n                    if grid[ni][nj] == '.':\n                        grid[ni][nj] = color\n                        visited[ni][nj] = True\n                        queue.append((ni, nj))\n                    elif grid[ni][nj] != color:\n                        return False\n        return True\n\n    # Check if the current grid is valid\n    def is_valid_grid():\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] == '.':\n                    continue\n                count_same = 0\n                for di, dj in dir:\n                    ni, nj = i + di, j + dj\n                    if is_valid(ni, nj) and grid[ni][nj] == grid[i][j]:\n                        count_same += 1\n                if count_same != 2:\n                    return False\n        return True\n\n    # Try to fill the grid\n    def fill_grid():\n        # First, check for any existing tiles\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    # Try to BFS from this tile\n                    # We'll try to propagate the color\n                    # If any conflict is found, it's invalid\n                    # But since we don't know the color, we can't do this\n                    # So we need to find all connected components and assign colors\n                    pass\n\n        # To find connected components\n        visited = [[False] * n for _ in range(n)]\n        components = []\n\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.' and not visited[i][j]:\n                    # Start BFS\n                    q = deque()\n                    q.append((i, j))\n                    visited[i][j] = True\n                    comp = []\n                    while q:\n                        x, y = q.popleft()\n                        comp.append((x, y))\n                        for dx, dy in dir:\n                            nx, ny = x + dx, y + dy\n                            if is_valid(nx, ny) and not visited[nx][ny] and grid[nx][ny] == grid[i][j]:\n                                visited[nx][ny] = True\n                                q.append((nx, ny))\n                    components.append(comp)\n\n        # Now, for each component, we need to assign a color\n        # But the color must be such that every tile in the component has exactly 2 neighbors of the same color\n        # This is only possible if the component forms a cycle\n        # So we can try to assign the color and check\n\n        # For each component, check if it can be a cycle\n        # If not, it's invalid\n        # Also, if there are multiple components with same color, they must be separate\n        # But since we don't know the color, we can't assign directly\n\n        # Instead, we can try to assign colors based on BFS and check consistency\n        # If any conflict, return None\n\n        # Try to assign color to all components\n        # Start with first component\n        # Try to assign color 'S' and see if it's possible\n        # Then try 'G' and see if it's possible\n        # If both are possible, then it's multiple\n\n        # But this is computationally expensive\n\n        # Instead, we can try to fill the grid with a BFS from a single tile\n        # And see if it's possible\n\n        # Try to find a tile that is not '.'\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    color = grid[i][j]\n                    # Try to propagate this color\n                    # If any conflict, then it's invalid\n                    # Else, check if all tiles have exactly 2 same neighbors\n                    # But this is not enough, because other tiles may be placed\n                    # So we need to fill the grid and check\n\n        # Try to fill the grid\n        # Start with any tile that is not '.'\n        # If there are multiple such tiles, and they have different colors, it's invalid\n        # So first, check if all non '.' tiles have the same color\n        # If not, it's invalid\n        first_color = None\n        for i in range(n):\n            for j in range(n):\n                if grid[i][j] != '.':\n                    if first_color is None:\n                        first_color = grid[i][j]\n                    elif grid[i][j] != first_color:\n                        print(\"NONE\")\n                        return\n\n        # Now, if there are any non '.' tiles, they must all be same color\n        # So we can try to fill the rest with that color\n        # But we need to check if the resulting grid is valid\n        # So we can try to fill all '.' with the same color\n        # Then check if each tile has exactly 2 neighbors of same color\n\n        # Try to fill\n        temp_grid = [row[:] for row in grid]\n        for i in range(n):\n            for j in range(n):\n                if temp_grid[i][j] == '.':\n                    temp_grid[i][j] = first_color\n\n        # Check if this grid is valid\n        def is_valid_grid_after_fill(g):\n            for i in range(n):\n                for j in range(n):\n                    cnt = 0\n                    for dx, dy in dir:\n                        ni, nj = i + dx, j + dy\n                        if is_valid(ni, nj) and g[ni][nj] == g[i][j]:\n                            cnt += 1\n                    if cnt != 2:\n                        return False\n            return True\n\n        if is_valid_grid_after_fill(temp_grid):\n            # Check if there are any '.' tiles\n            if any('.' in row for row in grid):\n                # Try to fill with other color\n                temp_grid2 = [row[:] for row in grid]\n                for i in range(n):\n                    for j in range(n):\n                        if temp_grid2[i][j] == '.':\n                            temp_grid2[i][j] = 'S' if first_color == 'G' else 'G'\n                if is_valid_grid_after_fill(temp_grid2):\n                    print(\"MULTIPLE\")\n                    return\n            print(\"UNIQUE\")\n            for row in temp_grid:\n                print(''.join(row))\n            return\n\n        # Try to fill with other color\n        temp_grid = [row[:] for row in grid]\n        for i in range(n):\n            for j in range(n):\n                if temp_grid[i][j] == '.':\n                    temp_grid[i][j] = 'S' if first_color == 'G' else 'G'\n\n        if is_valid_grid_after_fill(temp_grid):\n            print(\"UNIQUE\")\n            for row in temp_grid:\n                print(''.join(row))\n            return\n\n        # If no valid fill, then it's impossible\n        print(\"NONE\")\n\n    # Check if there are any non '.' tiles\n    has_non_dot = any('.' not in row for row in grid)\n\n    if not has_non_dot:\n        if n == 1:\n            print(\"NONE\")\n        else:\n            print(\"NONE\")\n        return\n\n    fill_grid()\n\nthreading.Thread(target=main).start()\n```"], "prompt_tokens": [710], "completion_tokens": [1754], "no_of_try": 1, "is_solved": false, "language": "Python3", "task_id": 1586}
